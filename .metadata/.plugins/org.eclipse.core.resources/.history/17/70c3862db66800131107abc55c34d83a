import java.io.*;
import java.util.ArrayList;
public class ParseIDFiles {
	private String dataDir;
	private ArrayList<PeakList> allLists;
	private PeakList done;
	public ParseIDFiles(String directory) {
		dataDir = directory;
		allLists = new ArrayList<PeakList>();
		done = new PeakList();
		File[] fileList = new File(dataDir).listFiles();
		for(int i=0;i<fileList.length;i++) {
			System.out.println(fileList[i].getAbsolutePath());
			PeakList pl = new PeakList();
			pl.loadFromFile(fileList[i].getAbsolutePath());
			allLists.add(pl);
		}
		
		for(int i=0;i<allLists.size();i++) {
			for(int j=0;j<allLists.get(i).getSize();j++) {
				Peak temp = allLists.get(i).getPeak(j);
				// Compare with done
				boolean isDone = false;
				if(done.indexOf(temp) > -1) {
					isDone = true;
					break;
				}
				if(!isDone) {
					String line = "";
					line += temp.getDatabaseID() + "," + temp.getAdduct() + "," + temp.getNotation();
					for(int k=0;k<allLists.size();k++) {
						line += ",";
						int index = allLists.get(k).indexOf(temp);
						if(index > -1) {
							line += ""+allLists.get(k).getPeak(index).getIntensity();
						}
					}
					done.addPeak(temp);
					System.out.println(line);
				}
			}
		}
		
		
	}
	
	public static void main(String[] args) {
		String directory = "/Users/simon/git/metabolomics_tools/AdductLevels/data/positive/std1/";
		ParseIDFiles p = new ParseIDFiles(directory);
		
	}
}
